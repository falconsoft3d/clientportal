{% extends 'base.html' %}

{% block content %}
<section class="section-content padding-y bg">
    <div class="container">
    
    <!-- ============================ COMPONENT 1 ================================= -->
    <div class="card">
        <div class="row no-gutters">
            <aside class="col-md-6">
    <article class="gallery-wrap"> 

        <br>
        <div class="img-big-wrap">
            <a href="#" class="pop">
                <img class="fullImage" src="{{ single_product.images.url }}">
            </a>
         </div> <!-- img-big-wrap.// -->
        
    </article> <!-- gallery-wrap .end// -->

    <ul class="thumb">
                <li>
                    <a href="{{ single_product.images.url }}" target="mainImage">
                        <img  src="{{ single_product.images.url }}" alt="imagen producto">
                    </a>
                    
            {% for i in product_gallery %}
                
                    <a href="{{ i.image.url }}" target="mainImage">
                        <img src="{{ i.image.url }}" alt="imagen producto">
                    </a>
                       
            {% endfor %}
            </li>  
    </ul>    
            </aside>
            <main class="col-md-6 border-left">
    
    <form action="{% url 'add_cart' single_product.id %}" method="POST">  
      {%  csrf_token %}
      <article class="content-body">
      
        <h2 class="title">{{ single_product.product_name }}</h2>  
        <p><b>Código:</b> {{ single_product.code }} | <b>ID:</b> {{ single_product.id }}</p>
        
        {% if user.id is not None %}
        <div class="mb-3"> 
            <var class="price h4">{{ single_product.price }}€</var> + IVA
            <br>
            <span class="badge bg-{% if single_product.stock > 0  %}success{% else %}danger{% endif %}">STOCK: {{ single_product.stock }} UN</span>
        </div>
        {% endif %}

        <p>{{ single_product.description }}.</p>
          <hr>
            {% comment %} <div class="row">
                <div class="item-option-select">
                    <h6>Seleccionar Color</h6>
                    <select class="form-control" name="color" required>
                        <option value="" disabled selected>Seleccione</option>
                        {% for i in single_product.variation_set.colors %}
                            <option value="{{ i.variant_value | lower }}">{{ i.variant_value | capfirst }}</option>
                        {% endfor %}
                    </select>  
                </div>
            </div> <!-- row.// -->

            <div class="row">
                <div class="item-option-select">
                    <h6>Seleccione Talla</h6>
                    <select class="form-control" name="talla" required>
                        <option value="" disabled selected>Seleccione</option>
                        {% for i in single_product.variation_set.tallas %}
                            <option value="{{ i.variant_value | lower}}">{{ i.variant_value | capfirst }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div> <!-- row.// --> 
            <hr>
            {% endcomment %}
          

          {% if user.id is not None %}
            <a href="{% url 'add_favorites' single_product.id %}" class="btn btn-outline-warning"><i class="fas fa-heart"></i> Agregar a Favoritos</a>
          {% endif %}

        
          {% comment %} {% if single_product.stock <= 0 %}
          <h5 class="mt-2">No tiene stock</h5>
          {% else  %} {% endcomment %}
          
          
          {% if user.id is not None %}
            <button type="submit"
                class="btn  btn-primary"> <i class="fas fa-shopping-cart"></i>
            <span class="text">Agregar al carro</span> 
          {% endif %}
          {% comment %} {% endif %} {% endcomment %}
      </article> <!-- product-info-aside .// -->
    </form>  


            </main> <!-- col.// -->
        </div> <!-- row.// -->
    </div> <!-- card.// -->

    </div> <!-- container .//  -->
    </section>
    <!-- ========================= SECTION CONTENT END// ========================= -->

    {% endblock %}